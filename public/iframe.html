<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ISSD Robo Advisor</title>
<body>
<iframe id="child" align="middle" frameBorder="1" src="./index.html?surveyId=si123&pricePath=1&experimentRound=2&experimentGroup=2&cabinNo=3" height="700px" width="900px"></iframe>
<script>
    // window.document.addEventListener('myChildEvent', handleEvent, false);
    // function handleEvent(e) {
    //     //console.log(e.detail);
    //
    //     // Get the URL and send it back to the child
    //     const data = { url: window.location.href };
    //     const event = new CustomEvent('myParentEvent', { detail: data });
    //     document.querySelector('#child').contentDocument.dispatchEvent(event);
    // }

    // Create event listener for summary and result event
    window.document.addEventListener('botEvent', handleEvent, false);
    function handleEvent(e) {
        console.log(e);
        const type = e.detail.type;
        const data = e.detail.data;

        window.alert("Type: " + type + "\nData: " + data);
        console.log("Type: " + type + "\nData: " + data);
    }

    // Event listener for messages
    window.addEventListener('message', function(event) {

        // IMPORTANT: Check the origin of the data!
        // if (~event.origin.indexOf('http://yoursite.com')) {
        //     // The data has been sent from your site
        //
        //     // The data sent with postMessage is stored in event.data
        //     console.log(event.data);
        // } else {
        //     // The data hasn't been sent from your site!
        //     // Be careful! Do not use it.
        //     return;
        // }

        if (event.data.type === "result") {
            console.log(event.data);
        }
        // window.alert(event.data);
    });
</script>
</body>
</html>